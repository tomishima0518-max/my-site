<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å®Œå…¨ç‰ˆMAXğŸ”¥YouTubeé¢¨ã‚µã‚¤ãƒˆã€æœªæ¥å…¨ã‚¹ãƒ†ãƒƒãƒ—çµ±åˆã€‘</title>
<style>
body{margin:0;padding:0;font-family:sans-serif;background:linear-gradient(45deg,#ff6666,#66ccff);transition:background 0.5s;}
header{padding:10px;text-align:center;background:#ff4444;color:white;font-size:1.5em;font-weight:bold;}
button{margin:5px;padding:10px;border:none;border-radius:10px;background:#ff5555;color:white;cursor:pointer;transition:0.2s;}
button:hover{background:#ff2222;}
#controls{display:flex;justify-content:center;flex-wrap:wrap;padding:10px;}
#gauges{display:flex;justify-content:space-around;margin:10px;}
.gauge{font-size:0.9em;white-space:pre;}
#videosLatest,#videosPopular,#videosRecommended{display:flex;flex-wrap:wrap;justify-content:center;margin:10px;}
.video-item{width:150px;margin:5px;padding:5px;background:#fff;border-radius:10px;box-shadow:0 0 5px #ccc;text-align:center;transition:0.3s;cursor:pointer;}
.video-item:hover{transform:scale(1.05);}
#pagination{text-align:center;margin:10px;}
input[type="text"]{padding:5px;border-radius:5px;border:1px solid #ccc;}
#explodeCanvas,#modalCanvas,#miniPlayer{position:absolute;top:0;left:0;pointer-events:none;z-index:1000;}
#videoModal{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1001;background:#000;padding:10px;border-radius:10px;}
#videoModal iframe{width:560px;height:315px;}
#closeModal{position:absolute;top:5px;right:5px;background:#ff4444;color:white;border:none;border-radius:5px;cursor:pointer;padding:5px;}
#comments{width:90%;margin:0 auto;background:#fff;border-radius:10px;padding:10px;max-height:200px;overflow-y:auto;}
.comment-item{border-bottom:1px solid #ccc;padding:5px 0;}
.sidebar{position:fixed;top:0;left:0;width:200px;height:100%;background:#222;color:white;padding:10px;display:flex;flex-direction:column;}
.sidebar button{margin-bottom:5px;width:100%;}
.main-content{margin-left:210px;padding:10px;}
#miniPlayer{bottom:10px;right:10px;width:320px;height:180px;background:#000;display:none;z-index:999;border-radius:10px;overflow:hidden;}
#miniPlayer iframe{width:100%;height:100%;}
</style>
</head>
<body>
<canvas id="explodeCanvas"></canvas>
<header>å®Œå…¨ç‰ˆMAXğŸ”¥YouTubeé¢¨ã‚µã‚¤ãƒˆã€æœªæ¥å…¨ã‚¹ãƒ†ãƒƒãƒ—çµ±åˆã€‘</header>

<div class="sidebar">
<button onclick="switchTab('home')">ğŸ ãƒ›ãƒ¼ãƒ </button>
<button onclick="switchTab('videos')">ğŸ¬å‹•ç”»</button>
<button onclick="switchTab('playlist')">ğŸ“‚å†ç”Ÿãƒªã‚¹ãƒˆ</button>
<button onclick="switchTab('community')">ğŸ’¬ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</button>
</div>

<div class="main-content" id="mainContent">
<div id="controls">
<input type="text" id="searchBox" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢">
<button onclick="searchVideos()">æ¤œç´¢</button>
<button onclick="triggerExplosion()">ğŸ’¥çˆ†ç™ºğŸ’¥</button>
</div>

<div id="gauges">
<div class="gauge" id="subscribersGauge">ç™»éŒ²è€…æ•°ãƒ¡ãƒ¼ã‚¿ãƒ¼: â¬›â¬›â¬›â¬›â¬› 0/0</div>
<div class="gauge" id="viewsGauge">å†ç”Ÿå›æ•°ãƒ¡ãƒ¼ã‚¿ãƒ¼: â¬›â¬›â¬›â¬›â¬› 0/0</div>
<div class="gauge" id="timeGauge">20ç§’ã‚²ãƒ¼ã‚¸: â¬›â¬›â¬›â¬›â¬›â¬›â¬›â¬›â¬›â¬› 0.000/20ç§’</div>
</div>

<h3 id="latestTitle" style="text-align:center;">æœ€æ–°å‹•ç”»</h3>
<div id="videosLatest"></div>

<h3 id="popularTitle" style="text-align:center;">äººæ°—å‹•ç”»</h3>
<div id="videosPopular"></div>

<h3 id="recommendedTitle" style="text-align:center;">ãŠã™ã™ã‚å‹•ç”»</h3>
<div id="videosRecommended"></div>

<div id="pagination">
<button onclick="prevPage()">â—€ å‰ã®ãƒšãƒ¼ã‚¸</button>
<span id="pageIndicator">1/5ãƒšãƒ¼ã‚¸ç›®</span>
<button onclick="nextPage()">æ¬¡ã®ãƒšãƒ¼ã‚¸ â–¶</button>
</div>

<div id="comments"><strong>ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰</strong></div>
</div>

<div id="videoModal">
<button id="closeModal" onclick="closeModal()">âœ–</button>
<iframe id="modalFrame" src="" frameborder="0" allowfullscreen></iframe>
<div id="modalInfo" style="color:white;margin-top:5px;"></div>
</div>

<div id="miniPlayer"><iframe id="miniFrame" src="" frameborder="0" allowfullscreen></iframe></div>

<script>
// ===== APIè¨­å®š =====
const API_KEY = 'ä¿å­˜æ¸ˆã¿APIã‚­ãƒ¼';
const CHANNEL_ID = 'ä¿å­˜æ¸ˆã¿ã®ãƒãƒ£ãƒ³ãƒãƒ«ID';
const TOTAL_PAGES = 5;
const VIDEOS_PER_PAGE = 10;

// ===== çŠ¶æ…‹ =====
let currentPage = 1;
let videos=[], videosPopular=[], videosRecommended=[];
let subTarget=0, viewTarget=0;
let subDisplay=0, viewDisplay=0;
let timer=0;
let bgHue=0;
let activeTab='home';
let miniPlayerActive=false;

// ===== èƒŒæ™¯ã‚¢ãƒ‹ãƒ¡ =====
function animateBackground(){ bgHue+=0.1; if(bgHue>360) bgHue=0; document.body.style.background=`linear-gradient(${bgHue}deg,#ff6666,#66ccff)`; requestAnimationFrame(animateBackground);}

// ===== ã‚²ãƒ¼ã‚¸æ›´æ–° =====
function updateGauges(){
  if(subDisplay<subTarget) subDisplay += Math.max((subTarget-subDisplay)/50,0.5);
  if(viewDisplay<viewDisplay) viewDisplay += Math.max((viewTarget-viewDisplay)/50,0.5);
  let subBlocks = Math.floor(subDisplay/(subTarget/5)||0);
  let viewBlocks = Math.floor(viewDisplay/(viewTarget/5)||0);
  let timeBlocks = Math.floor(timer/2);
  let subColor = subBlocks==5?'ğŸŸ¨':'ğŸŸ©';
  let viewColor = viewBlocks==5?'ğŸŸ¨':'ğŸŸ©';
  document.getElementById("subscribersGauge").innerText=`ç™»éŒ²è€…æ•°ãƒ¡ãƒ¼ã‚¿ãƒ¼: ${subColor.repeat(subBlocks)}${"â¬›".repeat(5-subBlocks)} ${Math.floor(subDisplay)}/${subTarget}`;
  document.getElementById("viewsGauge").innerText=`å†ç”Ÿå›æ•°ãƒ¡ãƒ¼ã‚¿ãƒ¼: ${viewColor.repeat(viewBlocks)}${"â¬›".repeat(5-viewBlocks)} ${Math.floor(viewDisplay)}/${viewTarget}`;
  document.getElementById("timeGauge").innerText=`20ç§’ã‚²ãƒ¼ã‚¸: ${"ğŸŸ©".repeat(timeBlocks)}${"â¬›".repeat(10-timeBlocks)} ${timer.toFixed(3)}/20ç§’`;
}

// ===== APIã§ãƒãƒ£ãƒ³ãƒãƒ«å–å¾— =====
async function fetchChannelStats(){
  try{
    const resp = await fetch(`https://www.googleapis.com/youtube/v3/channels?part=statistics,snippet&id=${CHANNEL_ID}&key=${API_KEY}`);
    const data = await resp.json();
    const stats = data.items[0].statistics;
    subTarget=parseInt(stats.subscriberCount);
    viewTarget=parseInt(stats.viewCount);
    const snippet = data.items[0].snippet;
    const header=document.querySelector('header');
    header.innerHTML=`<img src="${snippet.thumbnails.default.url}" style="vertical-align:middle;border-radius:50%;"> ${snippet.title} ğŸ”¥å®Œå…¨ç‰ˆMAX`;
  }catch(err){console.error(err); subTarget=350; viewTarget=720;}
}

// ===== APIã§å‹•ç”»å–å¾— =====
async function fetchVideos(){
  try{
    const resp = await fetch(`https://www.googleapis.com/youtube/v3/search?key=${API_KEY}&channelId=${CHANNEL_ID}&part=snippet&order=date&maxResults=50&type=video`);
    const data = await resp.json();
    videos = data.items.map(v=>({title:v.snippet.title,thumb:v.snippet.thumbnails.default.url,videoId:v.id.videoId,published:v.snippet.publishedAt,desc:v.snippet.description}));
    const ids = videos.map(v=>v.videoId).join(',');
    const statResp = await fetch(`https://www.googleapis.com/youtube/v3/videos?key=${API_KEY}&id=${ids}&part=statistics`);
    const statData = await statResp.json();
    videosPopular = statData.items.map((v,i)=>({...videos[i], views:parseInt(v.statistics.viewCount), likes:parseInt(v.statistics.likeCount||0)})).sort((a,b)=>b.views-a.views);
    videosRecommended = videosPopular.slice(0,10); //ç°¡æ˜“ãŠã™ã™ã‚
  }catch(err){console.error(err);}
}

// ===== å‹•ç”»è¡¨ç¤º =====
function showVideos(keyword=""){
  const latestDiv=document.getElementById("videosLatest");
  const popularDiv=document.getElementById("videosPopular");
  const recDiv=document.getElementById("videosRecommended");
  latestDiv.innerHTML=""; popularDiv.innerHTML=""; recDiv.innerHTML="";
  let filteredLatest = keyword? videos.filter(v=>v.title.includes(keyword)):videos;
  let filteredPopular = keyword? videosPopular.filter(v=>v.title.includes(keyword)):videosPopular;
  let filteredRec = keyword? videosRecommended.filter(v=>v.title.includes(keyword)):videosRecommended;
  let start = (currentPage-1)*VIDEOS_PER_PAGE;
  filteredLatest.slice(start,start+VIDEOS_PER_PAGE).forEach(v=>addVideoDiv(latestDiv,v,true));
  filteredPopular.slice(start,start+VIDEOS_PER_PAGE).forEach(v=>addVideoDiv(popularDiv,v,true));
  filteredRec.forEach(v=>addVideoDiv(recDiv,v,true));
  document.getElementById("pageIndicator").innerText=`${currentPage}/${TOTAL_PAGES}ãƒšãƒ¼ã‚¸ç›®`;
}

// ===== å‹•ç”»DIVè¿½åŠ  =====
function addVideoDiv(container,v,enableMini=false){
  let div=document.createElement("div");
  div.className="video-item";
  div.innerHTML=`<img src="${v.thumb}" style="width:100%;border-radius:5px;"><br>${v.title}<br>å†ç”Ÿ:${v.views||0} é«˜è©•ä¾¡:${v.likes||0}`;
  div.onclick=()=>{
    openModal(v.videoId,v.title,v.desc);
    if(enableMini) openMiniPlayer(v.videoId);
  };
  container.appendChild(div);
}

// ===== ãƒšãƒ¼ã‚¸åˆ‡æ›¿ãƒ»æ¤œç´¢ =====
function prevPage(){ if(currentPage>1){currentPage--; showVideos(document.getElementById("searchBox").value);} }
function nextPage(){ if(currentPage<TOTAL_PAGES){currentPage++; showVideos(document.getElementById("searchBox").value);} }
function searchVideos(){ let kw=document.getElementById("searchBox").value; showVideos(kw); }

// ===== ã‚¿ãƒ–åˆ‡æ›¿ =====
function switchTab(tab){ activeTab=tab; document.getElementById("mainContent").style.display='block'; }

// ===== ã‚¿ã‚¤ãƒãƒ¼0.001ç§’æ›´æ–° =====
function animate(){ timer+=0.001; if(timer>20) timer=0; updateGauges(); requestAnimationFrame(animate); }

// ===== çˆ†ç™ºã‚¨ãƒ•ã‚§ã‚¯ãƒˆ =====
const canvas=document.getElementById("explodeCanvas");
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
const ctx=canvas.getContext("2d");
let particles=[];
function triggerExplosion(){ for(let i=0;i<100;i++){particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,vx:(Math.random()-0.5)*5,vy:(Math.random()-0.5)*5,life:100});} }
function animateParticles(){ ctx.clearRect(0,0,canvas.width,canvas.height); for(let i=particles.length-1;i>=0;i--){let p=particles[i]; p.x+=p.vx; p.y+=p.vy; p.life--; ctx.fillStyle=`rgba(${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},0,${p.life/100})`; ctx.beginPath(); ctx.arc(p.x,p.y,3,0,Math.PI*2); ctx.fill(); if(p.life<=0) particles.splice(i,1);} requestAnimationFrame(animateParticles); }

// ===== ãƒ¢ãƒ¼ãƒ€ãƒ«å†ç”Ÿ =====
function openModal(videoId,title,desc){ document.getElementById("modalFrame").src=`https://www.youtube.com/embed/${videoId}?autoplay=1`; document.getElementById("videoModal").style.display="block"; document.getElementById("modalInfo").innerText=`${title}\n${desc}`; updateGaugesOnPlay(); }
function closeModal(){document.getElementById("modalFrame").src=""; document.getElementById("videoModal").style.display="none";}

// ===== ãƒŸãƒ‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ =====
function openMiniPlayer(videoId){ miniPlayerActive=true; document.getElementById("miniPlayer").style.display="block"; document.getElementById("miniFrame").src=`https://www.youtube.com/embed/${videoId}?autoplay=1`; }
function closeMiniPlayer(){ miniPlayerActive=false; document.getElementById("miniPlayer").style.display="none"; document.getElementById("miniFrame").src=""; }

// ===== ã‚³ãƒ¡ãƒ³ãƒˆãƒ¢ãƒƒã‚¯ =====
function addComment(user,text){ let c=document.createElement("div"); c.className="comment-item"; c.innerText=`${user}: ${text}`; document.getElementById("comments").appendChild(c); }

// ===== å†ç”Ÿä¸­ã‚²ãƒ¼ã‚¸åå¿œ =====
function updateGaugesOnPlay(){ triggerExplosion(); subDisplay+=1; viewDisplay+=1; }

// ===== åˆæœŸåŒ– =====
window.onload=async ()=>{
  await fetchChannelStats();
  await fetchVideos();
  showVideos();
  animate();
  animateParticles();
  animateBackground();
  addComment("ãƒ¦ãƒ¼ã‚¶ãƒ¼A","æœªæ¥ç‰ˆMAXğŸ”¥æœ€é«˜ã§ã™ï¼");
  addComment("ãƒ¦ãƒ¼ã‚¶ãƒ¼B","ãŠã™ã™ã‚å‹•ç”»ã‚‚è‡ªå‹•ç”Ÿæˆã•ã‚Œã¦ã‚‹ğŸ‘€");
}
</script>
</body>
</html>
