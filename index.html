<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒªãƒ¥ã‚¦ãƒ†ãƒ³ã‚µã‚¤ãƒˆğŸ”¥</title>
<style>
  body {
    margin:0;
    font-family: 'Arial', sans-serif;
    background: linear-gradient(135deg, #ff4d4d, #ffffff);
    color:#222;
    text-align:center;
  }
  h1 {
    font-size:2em;
    margin-top:1em;
  }
  .link-btn {
    display:inline-block;
    margin:0.5em;
    padding:0.8em 1.5em;
    background:#ff4d4d;
    color:white;
    font-weight:bold;
    border-radius:10px;
    text-decoration:none;
    transition:0.3s;
  }
  .link-btn:hover { background:#e60000; }

  #subscriber-container {
    width:80%;
    max-width:500px;
    background:#eee;
    border-radius:20px;
    margin:1em auto;
    padding:10px;
    position:relative;
  }
  #subscriber-bar {
    height:30px;
    background:#ff4d4d;
    border-radius:20px;
    width:0%;
    transition:1s;
  }
  #subscriber-text {
    position:absolute;
    width:100%;
    top:0;
    left:0;
    line-height:30px;
    font-weight:bold;
  }

  #latestVideo {
    margin-top:2em;
  }
</style>
</head>
<body>

<h1>ğŸ”¥ ãƒªãƒ¥ã‚¦ãƒ†ãƒ³ã®Gameå®Ÿæ³ã‚µã‚¤ãƒˆ ğŸ”¥</h1>

<a class="link-btn" href="https://tomishima0518-max.github.io/my-site/" target="_blank">â–¶ ç§ã®ã‚µã‚¤ãƒˆã¯ã“ã¡ã‚‰</a>
<a class="link-btn" href="https://www.youtube.com/@ãƒªãƒ¥ã‚¦ãƒ†ãƒ³ã®Gameå®Ÿæ³" target="_blank">â–¶ ãƒãƒ£ãƒ³ãƒãƒ«ã¯ã“ã¡ã‚‰</a>

<div id="subscriber-container">
  <div id="subscriber-bar"></div>
  <div id="subscriber-text">ç™»éŒ²è€…: 0</div>
</div>

<h2>ğŸ¥ æœ€æ–°å‹•ç”»ã¯ã“ã¡ã‚‰</h2>
<div id="latestVideo"></div>

<script>
  // â˜…ã“ã“ã«æœ€åˆã‹ã‚‰å…¥ã‚Œã¦ã‚‹â˜…
  const API_KEY = "AIzaSyAtuU52SYQS0mKrJrMh-TW-7mrJhYpt3Es"; 
  const CHANNEL_ID = "UCmZY34Ev1I5FIcDC5tdXeDg"; 
  const TARGET = 140;

  async function fetchSubscribers() {
    try {
      const res = await fetch(`https://www.googleapis.com/youtube/v3/channels?part=statistics&id=${CHANNEL_ID}&key=${API_KEY}`);
      const data = await res.json();
      const subs = parseInt(data.items[0].statistics.subscriberCount);
      let widthPercent = Math.min(subs / TARGET * 100, 100);
      if(subs > TARGET) widthPercent = Math.min((subs/TARGET)*120,200); // ç›®æ¨™è¶…ãˆãŸã‚‰1.2å€
      document.getElementById("subscriber-bar").style.width = widthPercent + "%";
      document.getElementById("subscriber-text").innerText = `ç™»éŒ²è€…: ${subs}`;
    } catch(err){ console.error(err); }
  }

  async function fetchLatestVideo() {
    try {
      const res = await fetch(`https://www.googleapis.com/youtube/v3/search?key=${API_KEY}&channelId=${CHANNEL_ID}&part=snippet&order=date&maxResults=1`);
      const data = await res.json();
      if(data.items && data.items.length > 0){
        const video = data.items[0];
        const embed = `<iframe width="560" height="315" src="https://www.youtube.com/embed/${video.id.videoId}" frameborder="0" allowfullscreen></iframe>`;
        document.getElementById("latestVideo").innerHTML = embed;
      }
    } catch(err){ console.error(err); }
  }

  fetchSubscribers();
  fetchLatestVideo();

  // æ›´æ–°é »åº¦ï¼šæ¯ç§’
  setInterval(fetchSubscribers, 1000); 
  setInterval(fetchLatestVideo, 1000); 
</script>

</body>
</html>
