<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ryuten Portal</title>

<style>
body{
    font-family:sans-serif;
}

.video-box{
    border:2px solid red;
    padding:20px;
    margin-top:20px;
    border-radius:15px;
    max-width:600px;
    background:#fff;
}

.progress-bar{
    width:100%;
    height:10px;
    background:#eee;
    border-radius:20px;
    overflow:hidden;
    margin-top:10px;
}

.progress{
    height:100%;
    width:0%;
    background:red;
    transition:width 0.4s;
}

.thumbnail{
    height:200px;
    margin-top:20px;
    border-radius:10px;
    background-size:cover;
    background-position:center;
    transition:opacity 0.4s;
}
</style>
</head>

<body>

<h1>Ryuten Portal</h1>

<div id="video"></div>

<script>
window.addEventListener("load", function(){

    const videoArea = document.getElementById("video");

    const box = document.createElement("div");
    box.className = "video-box";

    box.innerHTML = `
        <div>
            â³ æ›´æ–°ã¾ã§ <span id="timer">20</span> ç§’
        </div>

        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>

        <div id="thumbnail" class="thumbnail"></div>

        <h3 id="videoTitle" style="margin-top:20px;">
            èª­ã¿è¾¼ã¿ä¸­...
        </h3>

        <p id="videoInfo">
            å†ç”Ÿå›æ•°: --- ï½œ æŠ•ç¨¿æ—¥: ä»Šæ—¥
        </p>
    `;

    videoArea.appendChild(box);

    const titles = [
        "ğŸ”¥ Roblox DOORS æœ€é€Ÿæ”»ç•¥ï¼",
        "ğŸ‘€ ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ‹ãƒ¥ãƒ¼ã‚¹é€Ÿå ±",
        "ğŸ’¥ ç¥ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆè§£èª¬",
        "ğŸ® æ–°ä½œã‚²ãƒ¼ãƒ ãƒ¬ãƒ“ãƒ¥ãƒ¼",
        "ğŸš€ ä»Šé€±ã®è©±é¡Œã¾ã¨ã‚"
    ];

    const images = [
        "https://picsum.photos/600/300?random=1",
        "https://picsum.photos/600/300?random=2",
        "https://picsum.photos/600/300?random=3",
        "https://picsum.photos/600/300?random=4",
        "https://picsum.photos/600/300?random=5"
    ];

    const timer = document.getElementById("timer");
    const progress = document.getElementById("progress");
    const thumbnail = document.getElementById("thumbnail");
    const title = document.getElementById("videoTitle");
    const info = document.getElementById("videoInfo");

    let timeLeft = 20;

    function changeContent(){
        const randomIndex = Math.floor(Math.random() * titles.length);

        title.textContent = titles[randomIndex];

        thumbnail.style.opacity = "0";

        setTimeout(()=>{
            thumbnail.style.backgroundImage = "url('" + images[randomIndex] + "')";
            thumbnail.style.opacity = "1";
        },200);

        const views = Math.floor(Math.random() * 10000 + 1000);
        info.textContent = "å†ç”Ÿå›æ•°: " + views + " å› ï½œ æŠ•ç¨¿æ—¥: ä»Šæ—¥";
    }

    changeContent();

    setInterval(()=>{
        timeLeft--;

        const percent = ((20 - timeLeft)/20)*100;
        progress.style.width = percent + "%";
        timer.textContent = timeLeft;

        if(timeLeft <= 0){
            timeLeft = 20;
            progress.style.width = "0%";
            timer.textContent = timeLeft;
            changeContent();
        }

    },1000);

});
</script>
<script>
const API_KEY = "AIzaSyCrywE11RwAJm5_MsUAkcZ_WQECJehcLRY";
const CHANNEL_ID = "UCmZY34Ev1I5FIcDC5tdXeDg";

async function loadVideos(){

    const grid = document.getElementById("videoGrid");

    const searchUrl =
    `https://www.googleapis.com/youtube/v3/search?key=${API_KEY}&channelId=${CHANNEL_ID}&part=snippet&order=date&maxResults=3&type=video`;

    const searchRes = await fetch(searchUrl);
    const searchData = await searchRes.json();

    const videoIds = searchData.items.map(v=>v.id.videoId).join(",");

    const statsUrl =
    `https://www.googleapis.com/youtube/v3/videos?key=${API_KEY}&id=${videoIds}&part=statistics`;

    const statsRes = await fetch(statsUrl);
    const statsData = await statsRes.json();

    grid.innerHTML = "";

    searchData.items.forEach((item,index)=>{

        const videoId = item.id.videoId;
        const title = item.snippet.title;
        const thumbnail = item.snippet.thumbnails.high.url;
        const views = statsData.items[index].statistics.viewCount;

        grid.innerHTML += `
        <div class="card">
            <img src="${thumbnail}">
            <h3>${title}</h3>
            <p>å†ç”Ÿå›æ•°: ${Number(views).toLocaleString()} å›</p>
            <a href="https://www.youtube.com/watch?v=${videoId}" target="_blank">â–¶ è¦‹ã‚‹</a>
        </div>
        `;
    });
}

loadVideos();
</script>
</body>
</html>
